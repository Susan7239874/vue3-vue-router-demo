<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no">
    <title>宁夏机动车检验协会</title>
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js">
    </script>
    <script>
        if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
            window.location.href = "http://47.94.99.243:8080/html/carpc/index.html"+location.search;
        }
        var rem=null;
        //屏幕适应
        (function (win, doc) {
            if (!win.addEventListener) return;
            var html = document.documentElement;
            function setFont() {
                var html = document.documentElement;
                var k =750;
                html.style.fontSize = html.clientWidth / k * 100 + "px";
                rem=html.clientWidth / k * 100 ;
            }
            setFont();
            setTimeout(function () {
                setFont();
            }, 300);
            doc.addEventListener('DOMContentLoaded', setFont, false);
            win.addEventListener('resize', setFont, false);
            win.addEventListener('load', setFont, false);
        })(window, document);
    </script>
    <style>
        html{font-size:100px;}
    </style>
    <link rel="stylesheet" href="css/global.css?v1.3">
    <link rel="stylesheet" href="css/style.css?v1.08">
    <script src="js/request.js?v1.03"></script>
    <script src="js/getTime.js?v1.02"></script>
</head>
<body>
<div id="app">
<div class="header">
    <div class="title">志同而道合&nbsp;&nbsp;&nbsp;任重而道远</div>
    <div class="searchbox flex flex-vc flex-h">
        <img src="images/iconsearch.png" alt="iconsearch" class="iconsearch">
        <form @submit.prevent="" action="">
        <input type="search" class="inputtext" placeholder="请输入姓名、单位或身份证号" v-model="content" @keyup.13="goSearch">
        </form>
    </div>
</div>
    <my-header></my-header>
    <div class="main">
        <div class="mod mod0">
            <div class="left">
                <div class="modtitle">
                    协会简介
                </div>
                <div class="texts">
                    <p>宁夏机动车检验协会成立于2018年9月，由宁夏回族自治区内从事机动车检测业务的企业及相关行业内单位在平等、自愿基础上依法组成的具有法人资格的行业性、非营利性、全区性社会团体。目前拥有会员50余家，是宁夏回族自治区机动车检测行业唯一一家行业协会，协会工作一直以来得到主管部门、业内企业及社会各方人士的充分肯定。</p>
                    <p>我协会一直秉承遵守中华人民共和国宪法、法律、法规和国家政策，践行社会主义核心价值观，遵守社会道德风尚，促进行业技术进步和管理现代化，维护行业业户的合法权益，发挥沟通、协调作用，当好政府进行行业管理的助手，致力建设统一、开放、竞争、有序的机动车检验市场，为我区交通安全把好关，为宁夏经济发展作出贡献。 </p>
                </div>
            </div>
            <div class="right">
                <div class="modtitle">
                    网站服务
                </div>
                <div class="boxs">
                    <div class="one" v-on:touchstart="changeActive($event)" v-on:touchend="removeActive($event)"  @click="goRouter(2)">
                        <div class="pointer">考生考试</div>
                    </div>
                    <div class="one" v-on:touchstart="changeActive($event)" v-on:touchend="removeActive($event)"  @click="goRouter(1)">
                        <div class="pointer">成员查看</div>
                    </div>
                    <div class="one " v-on:touchstart="changeActive($event)" v-on:touchend="removeActive($event)" @click="goRouter(3)">
                        <div class="pointer">业内新闻</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mod  mod2">
            <div class="modtitle">
                获取途径
            </div>
            <div class="text">
                <span>*</span>报考协会的考试，通过考试后成为协会的成员，在官网的成员列表中可查看到技能标签
            </div>
        </div>
        <div class="mod  mod3" >
            <div class="left">
                <div class="modtitle">
                    热点新闻
                </div>
                <div class="more">
                    <div class="new flex flex-h flex-vc flex-hbet"
                         @click="goRouters('new.html',newitem.id)"
                         v-for="(newitem,newindex) of newlist0"
                         :key="newindex">
                        <div class="title ellipsis">{{newitem.title}}</div>
                        <div class="foot">{{newitem.date}}</div>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="modtitle">
                    新闻列表
                </div>
                <div class="more">
                    <div class="new flex  flex-h flex-vc flex-hbet"
                         @click="goRouters('new.html',new1item.id)"
                         v-for="(new1item,new1index) of newlist1" :key="new1index">
                        <div class="left flex flex-v flex-hc">
                            <div class="title ellipsis">{{new1item.title}}</div>
                            <div class="dec ellipsis">{{new1item.dec}}</div>
                            <div class="foot flex flex-h flex-vc">
                                <img src="images/iconclock.png" alt="iconclock">
                                <div>{{new1item.date}}</div>
                            </div>
                        </div>
                        <div class="right flex flex-vc">
                            <img src="images/iconright.png" alt="iconright">
                        </div>
                    </div>
                </div>
            </div>
            <div class="lookmore" @click="addMoreNew" v-if="newlist1.length<5">查看更多</div>
        </div>
    </div>
    <my-footer></my-footer>
</div>
<script src="js/component.js?v1.05"></script>
<script>
    // 左右点击滑动
    var nextnum=0;
    function slideNextFn(){
        if(nextnum>1){
            return;
        }
        let num=1.54*rem;
        $('.iconswrap').animate({left:"-="+num+"px"});
        nextnum+=1;
    }
    function slidePrevFn(){
        if(nextnum>2||nextnum<1){
            return;
        }
        let num=1.54*rem;
        $('.iconswrap').animate({left:"+="+num+"px"});
        nextnum-=1;
    }
    // 左右点击滑动
    var vm=new Vue({
        el: '#app',
        data: { //要存放的数据
            content:null,
            scrollHeight:0,//页面滚动的距离
            skillicons:[
                {
                    iconurl:'images/iconskill0.png',
                    name:'网络管理',
                },
                {
                    iconurl:'images/iconskill1.png',
                    name:'设备管理',
                },
                {
                    iconurl:'images/iconskill2.png',
                    name:'微机操作',
                },
                {
                    iconurl:'images/iconskill3.png',
                    name:'引车检验',
                },
                {
                    iconurl:'images/iconskill4.png',
                    name:'外观检验',
                },
                {
                    iconurl:'images/iconskill5.png',
                    name:'尾气检验',
                },
                {
                    iconurl:'images/iconskill6.png',
                    name:'档案管理',
                },
                {
                    iconurl:'images/iconskill7.png',
                    name:'路试检验',
                },
                {
                    iconurl:'images/iconskill8.png',
                    name:'底盘检验',
                },
            ],
            newlist0:[
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // },
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // },
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // },
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // },
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // },
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // },
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // },
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // },
                // {
                //     imgurl:'images/testimg.png',
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国让世界感受到中国情谊、中国'
                // }
            ],
            newlist1:[
                // {
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国',
                //     date:'2020年06月11日'
                // },
                // {
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国',
                //     date:'2020年06月11日'
                // },
                // {
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国',
                //     date:'2020年06月11日'
                // },{
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国',
                //     date:'2020年06月11日'
                // },
                // {
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国',
                //     date:'2020年06月11日'
                // },
                // {
                //     title:'习主席提出的四个“坚定不移”',
                //     dec:'第一报道 | 习主席提出的四个“坚定不移”让世界感受到中国情谊、中国',
                //     date:'2020年06月11日'
                // }
            ],
            newlist1more:[],//点击查看更多加上它
            new0currentPage:1,
            new0pageSize:6,
            new1currentPage:1,
            new1pageSize:7
        },
        methods:{
            addMoreNew(){
                this.newlist1=this.newlist1.concat(Object.assign([],this.newlist1more));
            },
            goRouters(path,id){//新闻跳转
                window.location.href=allUrl+path+'?id='+id;
            },
            goRouter(index){//跳转
                let gourl=null
                if(index==0){
                    gourl=homeUrl

                }else if(index==1){
                    gourl=memberListUrl
                }else if(index==3){
                    gourl=newUrl+'?id='+this.newlist0[0].id
                }else{
                    gourl=loginUrl
                }
                if(window.location.href==gourl){
                    return;
                }
                window.location.href=gourl
            },
            goSearch(){//搜索
                let content=this.content;
                if(content!==''&&content!==null){
                    window.location.href=memberListUrl+'?content='+content
                }else{
                    window.location.href=memberListUrl
                }

            },
            slideNext(){
               slideNextFn()
            },
            slidePrev(){
                slidePrevFn()
            },
            scrollfn(){//监测滚动距离
                let that=this;
                window.addEventListener("scroll", function () {//监测窗口自动滚动的情况，获得页面滚动距离
                    let scroll=$(window).scrollTop();
                    that.scrollHeight=scroll;
                })
            },
            changeActive($event){
                $event.currentTarget.className="one on";
            },
            removeActive($event){
                $event.currentTarget.className="one";
            },
            async requestHomeApi(){
                let res=await request('get','/news',{
                    currentPage:this.new0currentPage,
                    pageSize:this.new0pageSize,
                    type:0
                });
                // alert('res:'+JSON.stringify(res));
                if(res.code==1){
                    let arr=res.data.items.map((item)=>{
                        return{
                            id:item.id,
                            title:item.title,
                            date:getTransformDate(item.createTime)
                        }
                    })
                    this.newlist0=arr;
                }else{
                    alert('数据获取失败！')
                }

            },
            async requestHomeApi2(){
                let res=await request('get','/news',{
                    currentPage:this.new1currentPage,
                    pageSize:this.new1pageSize,
                    type:1
                });
                // alert('res:'+JSON.stringify(res));
                if(res.code==1){
                    let arr=res.data.items.map((item)=>{
                        return{
                            id:item.id,
                            title:item.title,
                            dec:'第一报道 | '+item.content,
                            date: getTransformTime2(item.createTime)
                        }
                    })
                    this.newlist1=arr.slice(0,4);
                    this.newlist1more=arr.slice(4);
                }else{
                    alert('数据获取失败！')
                }

            },
        },
        created: function () {
            this.scrollfn()
            this.requestHomeApi()
            this.requestHomeApi2()
        },
        mounted:function () {
            document.body.scrollTop = 0;
        }
    })


</script>
</body>
</html>

