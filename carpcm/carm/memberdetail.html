<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no">
    <title>宁夏机动车检验协会</title>
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
    <!--<script src="js/browser.min.js"></script>-->
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js">
    </script>
    <script>
        if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
            window.location.href = "http://47.94.99.243:8080/html/carpc/memberdetail.html"+location.search;
        }
        var rem=null;
        //屏幕适应
        (function (win, doc) {
            if (!win.addEventListener) return;
            var html = document.documentElement;
            function setFont() {
                var html = document.documentElement;
                var k =750;
                html.style.fontSize = html.clientWidth / k * 100 + "px";
                rem=html.clientWidth / k * 100 ;
            }
            setFont();
            setTimeout(function () {
                setFont();
            }, 300);
            doc.addEventListener('DOMContentLoaded', setFont, false);
            win.addEventListener('resize', setFont, false);
            win.addEventListener('load', setFont, false);
        })(window, document);
    </script>
    <style>
        html{font-size:100px;}
    </style>
    <link rel="stylesheet" href="css/global.css?v1.3">
    <link rel="stylesheet" href="css/memberdetail.css?v1.03">
    <script src="js/request.js?v1.03"></script>
</head>
<body>
<!--<script type="text/javascript" src="https://cdn.bootcss.com/vConsole/3.3.0/vconsole.min.js"></script>-->
<!--<script>-->
    <!--// 初始化-->
    <!--var vConsole = new VConsole();-->
    <!--console.log('Hello world');-->
<!--</script>-->
<div id="app">
    <my-header></my-header>
    <my-input  :content="content" @gosearch="gosearch"></my-input>
    <div class="main">
        <div class="left">
            <div class="modtitle">成员详情</div>
            <div class="personinfo flex flex-h">
                <img :src="detail.imgurl" alt="imgurl">
                <div class="more">
                    <div class="name">{{detail.name}}</div>
                    <div class="company">单位：{{detail.company}}</div>
                    <div class="idcard">证件号：{{detail.idCard}}</div>
                </div>
            </div>
            <div class="skills flex flex-h flex-hbet flex-hw">
                <div class="skill" v-for="(skillitem,skillindex) of detail.skills" :key="skillindex">
                    <div class="skilltitle">技能{{numberToUpperCase(skillindex)}}</div>
                    <div class="more flex flex-h flex-vc">
                        <img src="images/iconbook.png" alt="iconbook" class="iconbook">
                        <div class="skillname">{{skillitem.skillName}}</div>
                        <img src="images/iconclock1.png" alt="iconclock1" class="iconclock1">
                        <div class="skilldate">{{skillitem.grantTime}}</div>
                    </div>
                </div>
            </div>
            <div class="simple">
                <div class="title">个人简介</div>
                <div class="content">{{detail.simple}}</div>
            </div>
        </div>
        <div class="right">
            <div class="codewrap flex flex-vc">
                <img :src="detail.codeimg" alt="codeimg">
            </div>
            <div class="dec">扫描二维码在手机端查看信息</div>
        </div>
    </div>
    <my-footer></my-footer>
</div>
<script src="js/component.js?v1.05"></script>
<script>
    var vm=new Vue({
        el: '#app',
        data: { //要存放的数据
            content:null,//搜索框
            detail:null
                // {
                // name:'任烁',
                // imgurl:'images/testavator.png',
                // company:'陕西外远汽车检测修造有限公司',
                // simple:'任烁是一个非常好的车辆管理师傅！他的一生充满了传奇色彩，先是2019年勇夺最佳汽修的技能，再是在2020年的年初就拿下了第2个车辆管理的技能！任烁是一个非常好的车辆管理师傅！他的一生充满了传奇色彩，先是2019年勇夺最佳汽修的技能，再是在2020年的年初就拿下了第2个车辆管理的技能！任烁是一个非常好的车辆 管理师傅！他的一生充满了传奇色彩，先是2019年勇夺最佳汽修的技能 再是在2020年的年初就拿下了第2个车辆管理的技能！任烁是一个非常好的车辆管理师傅！他的一生充满了传奇色彩，先是2019年勇夺最佳汽修的技能，再是在2020年的年初就拿下了第2个车辆管理的技能！任烁是一个非常好的车辆管理师傅！ 他的一生充满了传奇色彩，先是2019年勇夺最佳汽修的技能，再是在2020年的年初就拿下了第2个车辆管理的技能！',
                // skills:[
                //     {
                //         grantTime:'2020年02月03日',
                //         skillName:'车辆管理',
                //     },
                //     {
                //         grantTime:'2020年02月03日',
                //         skillName:'车辆管理',
                //     },
                //     {
                //         grantTime:'2020年02月03日',
                //         skillName:'车辆管理',
                //     },
                //     {
                //         grantTime:'2020年02月03日',
                //         skillName:'车辆管理',
                //     }
                // ],
                // codeimg:'images/codeimg.png'
            // }
        },
        methods:{
            gosearch(content){//子组件点击搜索--触发父组件，得到子组件的输入框的值

                this.content=content;
                if(content!==''&&content!==null){
                    window.location.href=memberListUrl+'?content='+content
                }else{
                    window.location.href=memberListUrl
                }
            },
            async requestHomeApi(id){
                let res=await request('get','/user/'+id);
                let mainUser=Object.assign({},res.data.mainUser)
                let detail={
                    name:mainUser.name,
                    company: mainUser.unit,
                    // idCard:mainUser.idCard.replace(/^(.{4})(?:\d+)(.{4})$/,"\$1****\$2"),
                    idCard:mainUser.idCard,
                    imgurl: mainUser.avatar,
                    simple: mainUser.content,
                    skills:Object.assign([],res.data.skillList),
                    codeimg: mainUser.qrcode
                }
                this.detail=detail;
            },
             },
        created: function () {
            let id=getQueryString('id')
            this.requestHomeApi(id)
        },
        mounted:function () {
            document.body.scrollTop = 0;
        }
    })

</script>

</body>
</html>

